<button type="button" (click)="open(content)" class="btn btn-primary m-2">Manage Song Library</button>

<ng-template #content let-modal>
	<div class="modal-header">
		<h4 class="modal-title" id="modal-basic-title">Manage Song library</h4>
		<button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
	</div>
	<div class="modal-body">

			<table mat-table [dataSource]="dataSource" class="song-library">
		  		
		  		<!-- Artist Column -->
				<ng-container matColumnDef="artist">
					<th mat-header-cell *matHeaderCellDef> Artist </th>
					<td mat-cell *matCellDef="let element" [ngClass]="element.validation_requested ? 'validation-requested' : ''"> {{element.artist}} </td>
				</ng-container>

				<!-- Title Column -->
				<ng-container matColumnDef="title">
				<th mat-header-cell *matHeaderCellDef> Title </th>
				<td mat-cell *matCellDef="let element" [ngClass]="element.validation_requested ? 'validation-requested' : ''"> {{element.title}} </td>
				</ng-container>

				<!-- YouTube ID Column -->
				<ng-container matColumnDef="embedurl">
				<th mat-header-cell *matHeaderCellDef> YouTube ID </th>
				<td mat-cell *matCellDef="let element" [ngClass]="element.validation_requested ? 'validation-requested' : ''"> {{element.embedurl}} </td>
				</ng-container>

				<!-- Ops Column -->
				<ng-container matColumnDef="ops">
				<th mat-header-cell *matHeaderCellDef> </th>
				<td mat-cell *matCellDef="let element">
					<button (click)="validateSong(element)" class="d-inline btn btn-primary">Validate</button>
					<button (click)="editSong(element); openEditModal(editSongModal);" class="d-inline btn btn-secondary">Edit</button>
					<button (click)="deleteSong(element)" class="d-inline btn btn-danger">Delete</button>
				</td>
				</ng-container>

				<tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
				<tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
				</table>
	</div>
	<div class="modal-footer">
		<button type="button" class="btn btn-primary" (click)="modal.close('Save click')">Done</button>
	</div>
</ng-template>

<ng-template #editSongModal let-modal>
	<div class="modal-header">
		<h4 class="modal-title" id="modal-basic-title">Manage Song library</h4>
		<button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
	</div>
	<div class="modal-body">

		<div class="mb-3">

			<div>
				<label for="artist">Artist: </label>
				<input id="artist" [(ngModel)]="edittingSong.artist" placeholder="artist">
			</div>
			<div>
				<label for="title">Song Title: </label>
				<input id="title" [(ngModel)]="edittingSong.title" placeholder="title">
			</div>
			<div>
				<label for="embedurl">YouTube ID:</label>
				<input id="embedurl" [(ngModel)]="edittingSong.embedurl" placeholder="5bCwue1d9Js">
			</div>
		</div>
		<div >{{validSong ? 'This song should work' : 'This song should not work'}}</div>
		<div *ngIf="edittingSong.embedurl && validatingSong">
			
			<youtube-player videoId={{edittingSong.embedurl}} 
			[height]="100"
			[width]="100" 
			(ready)="youTubeReady($event)"
			></youtube-player>
			
		</div>
		<div>If you see the video preview load normally, click save to add the song to the library.  If you see an error, click cancel to not add the song to the library.</div>
	</div>
	<div class="modal-footer">
		<button type="button" class="btn btn-primary" (click)="modal.close('Save click')">Save</button>
		<button type="button" class="btn btn-danger" (click)="modal.close('Cross click')">Cancel</button>
	</div>
</ng-template>		